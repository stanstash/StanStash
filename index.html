<!DOCTYPE html>
<html lang="es">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StanStash</title>
  <link rel="stylesheet" href="css.css">
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="JavaScript.js" defer></script>
  
<script defer src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
<script type="text/javascript" data-cfasync="false">
/*<![CDATA[/* */
(function(){var m=window,p="f5dcf118c3e6487d8804227886b84709",c=[["siteId",201-902+343+5230980],["minBid",0],["popundersPerIP","0"],["delayBetween",0],["default",false],["defaultPerDay",0],["topmostLayer","auto"]],y=["d3d3LnByZW1pdW12ZXJ0aXNpbmcuY29tL294YS9Ma2hBL3JmanNvbi5taW4uanM=","ZDJqMDQyY2oxNDIxd2kuY2xvdWRmcm9udC5uZXQvYWRpbmVyby5taW4uanM=","d3d3Lmd5dHphYnpmbGpnY3kuY29tL3VDWS9nL21manNvbi5taW4uanM=","d3d3Lm9hb3RndXZrdy5jb20vcWRpbmVyby5taW4uanM="],w=-1,d,i,r=function(){clearTimeout(i);w++;if(y[w]&&!(1781773712000<(new Date).getTime()&&1<w)){d=m.document.createElement("script");d.type="text/javascript";d.async=!0;var q=m.document.getElementsByTagName("script")[0];d.src="https://"+atob(y[w]);d.crossOrigin="anonymous";d.onerror=r;d.onload=function(){clearTimeout(i);m[p.slice(0,16)+p.slice(0,16)]||r()};i=setTimeout(r,5E3);q.parentNode.insertBefore(d,q)}};if(!m[p]){try{Object.freeze(m[p]=c)}catch(e){}r()}})();
/*]]>/* */
</script>

</head>
<body>
 <header>
  <div class="header-left">
    <img src="https://github.com/stanstash/StanStash/blob/main/ChatGPT%20Image%2019%20ago%202025,%2015_08_37.png?raw=true" alt="Stanstash" class="logo-stanstash" style="width: 10em;">
  
  </div>
  <div class="header-center">
    <h1>StanStash Online</h1>
    

    <button style="margin: 1cm;" class="instrucciones">Instrucciones para descargar</button>
  </div>
  <div class="header-right">
    <div id="google-signin-button"></div>
    
  </div>
</header>

<!--Menu hamburguesa-->

<div id="menu-perfil" class="menu-derecha">
  <div class="perfil-imagen">
   
   
   
    
    <p id="nombre-menu"></p>
  </div>
  <ul>
    <li><div id="google_translate_element"></div></li>
    <li><a href="perfil.html" target="_blank">Perfil</a></li>
    <li><a href="#">Configuración</a></li>
    <li><button id="cerrarsesion" onclick="cerrarSesion()">Cerrar sesión</button></li>
    
   
    

  </ul>
</div>

<!--Menu hamburguesa-->


<main>
  
  <section class="juegos">
    
  <article class="juego">
    <img src="https://gaming-cdn.com/images/products/18808/orig/r-e-p-o-pc-juego-steam-cover.jpg?v=1741085446" alt="R.E.P.O.">
    <div class="info">
        <h2>R.E.P.O.</h2>
        <p>Juego de terror cooperativo donde debes recuperar objetos valiosos, evitar criaturas y sobrevivir con hasta 6 jugadores en línea.</p>
        <div class="acciones">
             <a href="https://www.mediafire.com/file/u4neregic4k3dt0/REPO.v0.2.1-OFME_%25289%2529.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>


     <article class="juego">
    <img src="https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/739630/capsule_616x353.jpg?t=1751054308" alt="R.E.P.O.">
    <div class="info">
        <h2>PHASMOPHOBIA</h2>
        <p>Phasmophobia es un juego de terror psicológico cooperativo en línea para 4 jugadores, donde los jugadores asumen el papel de investigadores paranormales que deben explorar lugares embrujados y recolectar evidencia sobre la actividad paranormal</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/1jortbmldxpj0mw/Phasmophobia.v0.14.0.1-OFME_%252810%2529.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

    <article class="juego">
    <img src="https://cdn.dlcompare.com/game_tetiere/upload/gameimage/file/peak-file-2130030f62.png.webp" alt="R.E.P.O.">
    <div class="info">
        <h2>PEAK</h2>
        <p>Embárcate en una aventura cooperativa donde hasta cuatro jugadores deben escalar una montaña en una isla misteriosa tras un accidente aéreo. Cada día, el mapa se genera de forma única, presentando nuevos desafíos y biomas.</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/myfl9270yi7dx2i/PEAK.v1.23.b-OFME_%252813%2529.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

    <article class="juego">
    <img src="https://i.ytimg.com/vi/XnKb3mFXX9o/hq720.jpg?sqp=-oaymwEhCK4FEIIDSFryq4qpAxMIARUAAAAAGAElAADIQj0AgKJD&rs=AOn4CLAJgPPBeQxSlDE89iTcbJmcJri_Pw" alt="R.E.P.O.">
    <div class="info">
        <h2>CRIME SIMULATOR</h2>
        <p>Sales de la cárcel, pero la deuda continúa. Roba y asalta casas tú solo o en modo cooperativo para 4 jugadores. Usa ganzúas, gas somnífero y fuerza bruta para completar los trabajos, burlar la seguridad y ganar suficiente dinero antes de que acabe el tiempo. ¿Pagarás la deuda o lo perderás todo?</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/4i4q77j91t1ysue/Crime.Simulator.v1.19g-OFME_%25281%2529.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

    <article class="juego">
    <img src="https://i.blogs.es/daa402/scum-key-art/1366_2000.jpeg" alt="R.E.P.O.">
    <div class="info">
        <h2>SCUM</h2>
        <p>Atraviesa entornos adversos, saquea, fabrica y evita las constantes amenazas que atentan contra tu vida. Los niveles sin precedentes de personalización y progresión de personaje son tus mejores herramientas para sobrevivir.</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/u4neregic4k3dt0/REPO.v0.2.1-OFME_%25289%2529.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

    <article class="juego">
    <img src="https://shared.fastly.steamstatic.com/store_item_assets/steam/apps/3448750/15591c2329e711c3a7015bd2a21e3c8c2fa19c30/capsule_616x353.jpg?t=1750960168" alt="R.E.P.O.">
    <div class="info">
        <h2>FROG JUMP</h2>
        <p>¡Salta, escala, empuja a los demás con tu lengua y llega a la cima para ganar el beso de la princesa! 🏰 (Hasta 8 jugadores)</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/bkn2fc2v06v9i22/Frog.Jump.v1.3-OFME.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

     <article class="juego">
    <img src="https://shared.akamai.steamstatic.com/store_item_assets/steam/apps/2943670/aea658aeb4a6115bdaa325c87672fdd1f86f8dcd/capsule_616x353.jpg?t=1753903448" alt="R.E.P.O.">
    <div class="info">
        <h2>NIGHT CLUB SIMULATOR</h2>
        <p>Compra un lugar abandonado y en ruinas y transfórmalo en el mejor club nocturno del país. Renueva, mejora y amplía el espacio mientras lidias con clientes problemáticos. Trabaja junto a tus amigos para alcanzar la cima de la vida nocturna</p>
        <div class="acciones">
           <a href="https://www.mediafire.com/file/oqpnhr4bku2bjy2/Night.Club.Simulator.v0.1.4-OFME.torrent/file" target="_blank">
                <button class="descargar">Descargar</button>
            </a>
        </div>
    </div>
    </article>

    
      <!-- Modal de iniciar sesión -->

     <div id="modal-login" class="modal">
        <div class="modal-content">
            <p>Debes iniciar sesión para continuar</p>
            <button id="cerrar-modal">Cerrar</button>
        </div>
      </div>


      <!-- Modal de descarga exitosa -->
      <div id="modal-descarga" class="modal">
        <div class="modal-content">
          <p>Disfruta tu juego.</p>
          <p>Instrucciones de descarga:</p>
          <p>1, Descargar torrent con navegador disponible</p>
          <p> <a target="_blank" href="https://www.qbittorrent.org/download">(qbittorrent)</a></p>
          <p>2, Extraer "CONTRASEÑA: <span style="color: rgb(255, 0, 0);"> online-fix.me" </span></p>
          <p>3, Ejecutar el archivo .exe:</p>
          <button id="cerrar-descarga">Cerrar</button>
        </div>
      </div>



  </section>
</main>
<hr>

<div class="wrap">
  <h1>Añadir un comentario</h1>
  <div class="card form">
    <label class="muted">Tu nombre</label>
    <input id="name" placeholder="Nombre" maxlength="50" />
    <label class="muted">Tu comentario</label>
    <textarea id="comment" placeholder="Escribe algo" maxlength="300"></textarea>
    <div id="contenedor-boton" style="display:flex; gap:0.5cm; align-items:center;">
      <button id="send" class="enviar">Enviar</button>
      <span id="infosesicom">Debes iniciar sesion para añadir un comentario</span>
    </div>
  </div>
</div>

<div style="margin: 3cm;">
  <h1>Comentarios</h1>
  <div class="list" id="comments"></div>
  <div style="display:flex; gap:1em; margin-top:2em; justify-content:center;">
    <button id="prev">Anterior</button>
    <span id="pagina">Página 1</span>
    <button id="next">Siguiente</button>
  </div>
</div>
</div>

<footer>
  <p>© 2025 StanStash, Andres Stan</p>
  <p>Colaboración con online-fix.me</p>
</footer>









</body>

 <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-app.js";
  import { 
    getFirestore, collection, addDoc, query, orderBy, limit, startAfter, serverTimestamp, getDocs 
  } from "https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyA3pC9eGaXI_a-F4wG1lDzX_7rsUFn2SPM",
    authDomain: "stanstash2.firebaseapp.com",
    projectId: "stanstash2",
    storageBucket: "stanstash2.firebasestorage.app",
    messagingSenderId: "198880396242",
    appId: "1:198880396242:web:bb7f96e42d20ad1cdfbe0b"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  const nameInput = document.getElementById("name");
  const commentInput = document.getElementById("comment");
  const sendBtn = document.getElementById("send");
  const list = document.getElementById("comments");
  const paginaSpan = document.getElementById("pagina");

  let lastVisible = null;
  let firstVisible = null;
  let currentPage = 1;
  const commentsRef = collection(db, "comments");
  const perPage = 5;

  // Enviar comentario
  let busy = false; 
  sendBtn.addEventListener("click", async () => {
    const name = (nameInput.value || "Anónimo").trim().slice(0, 50);
    const text = (commentInput.value || "").trim().slice(0, 300);
    const photo = window.usuarioFoto || ""; // ← foto del login de Google
    if (!text || busy) return;
    busy = true;
    try {
      await addDoc(commentsRef, {
        name,
        text,
        photo,
        timestamp: serverTimestamp()
      });
      commentInput.value = "";
      cargarComentarios("inicio"); // recargar a la primera página
    } finally {
      busy = false;
    }
  });

  // Cargar comentarios con paginación
  async function cargarComentarios(direccion = "inicio") {
    let q;

    if (direccion === "siguiente" && lastVisible) {
      q = query(commentsRef, orderBy("timestamp", "desc"), startAfter(lastVisible), limit(perPage));
      currentPage++;
    } else if (direccion === "anterior" && firstVisible) {
      const all = query(commentsRef, orderBy("timestamp", "desc"));
      const docsSnap = await getDocs(all);
      const docsArray = docsSnap.docs;
      const startIndex = (currentPage - 2) * perPage;
      const slice = docsArray.slice(startIndex, startIndex + perPage);

      list.innerHTML = "";
      slice.forEach(doc => renderComentario(doc.data()));
      firstVisible = slice[0];
      lastVisible = slice[slice.length - 1];
      currentPage--;
      paginaSpan.textContent = `Página ${currentPage}`;
      return;
    } else {
      q = query(commentsRef, orderBy("timestamp", "desc"), limit(perPage));
      currentPage = 1;
    }

    const snapshot = await getDocs(q);
    list.innerHTML = "";
    snapshot.forEach(doc => renderComentario(doc.data()));
    firstVisible = snapshot.docs[0];
    lastVisible = snapshot.docs[snapshot.docs.length - 1];
    paginaSpan.textContent = `Página ${currentPage}`;
  }

  function renderComentario(c) {
    const art = document.createElement("article");
    art.style.display = "flex";
    art.style.alignItems = "flex-start";
    art.style.gap = "10px";
    art.style.marginBottom = "12px";

    // Foto
    if (c.photo) {
      const img = document.createElement("img");
      img.src = c.photo;
      img.alt = c.name || "foto";
      img.style.width = "40px";
      img.style.height = "40px";
      img.style.borderRadius = "50%";
      img.style.objectFit = "cover";
      img.style.marginRight = "10px";
      img.style.border = "2px solid #ffcc00"; 
      img.style.marginTop = "17px";

      art.appendChild(img);
    }

    // Contenido
    const div = document.createElement("div");

    const head = document.createElement("header");
    head.style.display = "flex";
    head.style.justifyContent = "space-between";
    head.style.fontWeight = "600";

    const who = document.createElement("span");
    who.textContent = c.name || "Anónimo";

    const when = document.createElement("time");
    when.textContent = formatTime(c.timestamp);

    head.appendChild(who);
    head.appendChild(when);

    const body = document.createElement("p");
    body.textContent = c.text || "";

    div.appendChild(head);
    div.appendChild(body);

    art.appendChild(div);
    list.appendChild(art);
  }

  function formatTime(ts) {
    try {
      if (!ts || !ts.toDate) return "";
      return ts.toDate().toLocaleString();
    } catch {
      return "";
    }
  }

  document.getElementById("next").addEventListener("click", () => cargarComentarios("siguiente"));
  document.getElementById("prev").addEventListener("click", () => {
    if (currentPage > 1) cargarComentarios("anterior");
  });

  // Primera carga
  cargarComentarios();
</script>


</html>
