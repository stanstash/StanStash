<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Stanstash | Crypto Casino</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}?v=12.0">
</head>
<body>

    <header class="top-navbar">
        <div class="logo-container" onclick="navigate('home')">
            <i class="fa-solid fa-bolt accent-color"></i> <span class="brand-name">STANSTASH</span>
        </div>
        
        <div class="user-panel">
            <div class="guest-view" id="guestNav">
                <button class="btn-login" onclick="openModal('loginModal')">ENTRAR</button>
                <button class="btn-register desktop-only" onclick="openModal('registerModal')">REGISTRARSE</button>
            </div>
            
            <div class="logged-view hidden" id="loggedNav">
                <div class="balance-pill" onclick="openModal('depositModal')">
                    <span id="userBalance">0.00</span> <i class="fa-brands fa-bitcoin"></i>
                    <span class="add-fund-icon"><i class="fa-solid fa-plus"></i></span>
                </div>
                <div class="nav-avatar desktop-only" onclick="navigate('profile')">
                    <img id="navAvatarImg" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png" alt="Avatar">
                </div>
            </div>
        </div>
    </header>

    <main class="main-content">
        <section id="view-home" class="view-section active">
            <div class="hero-banner">
                <div class="hero-text">
                    <h1>CASINO CRYPTO <br><span class="text-gradient">SIN L√çMITES</span></h1>
                    <p>Retiros Instant√°neos ‚Ä¢ Sin KYC ‚Ä¢ 100% An√≥nimo</p>
                    <button class="btn-cta" onclick="navigate('games')">JUGAR AHORA</button>
                </div>
            </div>
            <div class="live-wins-section">
                <div class="section-header">
                    <div class="live-indicator"><span class="blink"></span> GANADORES EN VIVO</div>
                </div>
                <table class="wins-table">
                    <tbody id="liveWinsBody"></tbody>
                </table>
            </div>
        </section>

        <section id="view-games" class="view-section hidden">
            <div class="games-grid">
                <div class="game-card" onclick="alert('Crash en Mantenimiento')">
                    <div class="live-badge">LIVE</div>
                    <div class="game-poster crash-bg"><i class="fa-solid fa-plane-up"></i></div>
                    <div class="game-details"><h3>Crash</h3><p>Multiplicador x1000</p></div>
                </div>
                <div class="game-card" onclick="alert('Mines en Mantenimiento')">
                    <div class="game-poster mines-bg"><i class="fa-solid fa-bomb"></i></div>
                    <div class="game-details"><h3>Mines</h3><p>Estrategia Pura</p></div>
                </div>
                <div class="game-card locked">
                    <div class="game-poster slots-bg" style="opacity:0.5"><i class="fa-solid fa-lock"></i></div>
                    <div class="game-details"><h3>Slots VIP</h3><p>Pr√≥ximamente</p></div>
                </div>
            </div>
        </section>

        <section id="view-profile" class="view-section hidden">
            <div class="profile-page-container">
                <div class="profile-wrapper">
                    
                    <div class="profile-header-card">
                        <div class="profile-info-row">
                            <div class="profile-avatar-area">
                                <img id="profileAvatarBig" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png">
                                <label for="avatarInput" class="camera-btn"><i class="fa-solid fa-camera"></i></label>
                                <input type="file" id="avatarInput" hidden onchange="uploadAvatar()" accept="image/*">
                            </div>
                            <div class="profile-text">
                                <h3 id="profileUsername">Cargando...</h3>
                                <div class="badge-row">
                                    <span class="user-badge verified"><i class="fa-solid fa-check-circle"></i> Verificado</span>
                                    <span class="user-badge vip">VIP Bronce</span>
                                </div>
                            </div>
                        </div>

                        <div class="vip-progress-container">
                            <div class="vip-labels">
                                <span>Nivel 1</span>
                                <span>Nivel 2</span>
                            </div>
                            <div class="progress-bar-bg">
                                <div class="progress-bar-fill" style="width: 35%;"></div>
                            </div>
                            <p class="vip-text">Apuesta <b>450$</b> m√°s para subir de nivel.</p>
                        </div>
                    </div>

                    <div class="wallet-card">
                        <div class="wallet-header">
                            <span>SALDO TOTAL</span>
                            <i class="fa-solid fa-eye" style="cursor:pointer; color:#666;"></i>
                        </div>
                        <div class="wallet-amount" id="profileBalanceDisplay">0.00</div>
                        <div class="wallet-actions">
                            <button class="btn-dep" onclick="openModal('depositModal')">
                                <i class="fa-solid fa-arrow-down"></i> Depositar
                            </button>
                            <button class="btn-wd" onclick="alert('Retiros habilitados en 24h')">
                                <i class="fa-solid fa-arrow-up"></i> Retirar
                            </button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <span class="stat-label">Jugado</span>
                            <span class="stat-value">0.00$</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Ganado</span>
                            <span class="stat-value text-green">0.00$</span>
                        </div>
                        <div class="stat-box">
                            <span class="stat-label">Partidas</span>
                            <span class="stat-value">0</span>
                        </div>
                    </div>

                    <div class="settings-list">
                        <div class="settings-item" onclick="alert('Sin historial reciente')">
                            <div class="set-icon"><i class="fa-solid fa-clock-rotate-left"></i></div>
                            <div class="set-text">Historial de Apuestas</div>
                            <i class="fa-solid fa-chevron-right arrow"></i>
                        </div>
                        <div class="settings-item" onclick="alert('Sin transacciones')">
                            <div class="set-icon"><i class="fa-solid fa-money-bill-transfer"></i></div>
                            <div class="set-text">Transacciones</div>
                            <i class="fa-solid fa-chevron-right arrow"></i>
                        </div>
                        <div class="settings-item" onclick="alert('Tu enlace de referido es: stans.tash/u/' + currentUser)">
                            <div class="set-icon"><i class="fa-solid fa-users"></i></div>
                            <div class="set-text">Referidos & Afiliados</div>
                            <i class="fa-solid fa-chevron-right arrow"></i>
                        </div>
                        <div class="settings-item" onclick="alert('Sistema seguro')">
                            <div class="set-icon"><i class="fa-solid fa-shield-halved"></i></div>
                            <div class="set-text">Seguridad (2FA)</div>
                            <i class="fa-solid fa-chevron-right arrow"></i>
                        </div>
                        
                        <div class="settings-item danger" onclick="doLogout()">
                            <div class="set-icon"><i class="fa-solid fa-power-off"></i></div>
                            <div class="set-text">Cerrar Sesi√≥n</div>
                        </div>
                    </div>

                </div>
            </div>
        </section>
    </main>

    <aside class="desktop-sidebar desktop-only">
        <nav class="sidebar-menu">
            <a href="#" onclick="navigate('home')" class="sidebar-item active" id="side-home"><i class="fa-solid fa-house"></i> Inicio</a>
            <a href="#" onclick="navigate('games')" class="sidebar-item" id="side-games"><i class="fa-solid fa-gamepad"></i> Juegos</a>
            <a href="#" onclick="openModal('depositModal')" class="sidebar-item"><i class="fa-solid fa-wallet"></i> Cartera</a>
            <a href="#" onclick="alert('Chat Global: Conectando...')" class="sidebar-item"><i class="fa-solid fa-comments"></i> Chat Global</a>
            <a href="#" onclick="handleProfileClick()" class="sidebar-item" id="side-profile"><i class="fa-solid fa-user"></i> Mi Perfil</a>
        </nav>
        <div class="sidebar-footer hidden" id="desktopLogout">
            <button class="btn-logout-side" onclick="doLogout()"><i class="fa-solid fa-right-from-bracket"></i> Cerrar Sesi√≥n</button>
        </div>
    </aside>

    <nav class="bottom-nav mobile-only">
        <a href="#" onclick="navigate('home')" class="nav-item active" id="nav-home"><i class="fa-solid fa-house"></i><span>Inicio</span></a>
        <a href="#" onclick="openModal('depositModal')" class="nav-item"><i class="fa-solid fa-wallet"></i><span>Cartera</span></a>
        <div class="nav-center" onclick="navigate('games')"><i class="fa-solid fa-play"></i></div>
        <a href="#" onclick="alert('Chat m√≥vil pr√≥ximamente')" class="nav-item"><i class="fa-solid fa-comments"></i><span>Chat</span></a>
        <a href="#" onclick="handleProfileClick()" class="nav-item" id="nav-profile"><i class="fa-solid fa-user"></i><span>Perfil</span></a>
    </nav>

    <div id="loginModal" class="modal hidden">
        <div class="modal-content auth-modal">
             <span class="close" onclick="closeModal('loginModal')">&times;</span>
             <h2>Bienvenido</h2>
             <input type="text" id="loginUser" placeholder="Usuario" class="input-field">
             <input type="password" id="loginPass" placeholder="Contrase√±a" class="input-field">
             <button class="btn-action" onclick="doLogin()">INICIAR SESI√ìN</button>
             <div class="auth-footer"><a onclick="switchModal('loginModal', 'registerModal')">Crear cuenta nueva</a></div>
        </div>
    </div>
    <div id="registerModal" class="modal hidden">
        <div class="modal-content auth-modal">
             <span class="close" onclick="closeModal('registerModal')">&times;</span>
             <h2>Registro</h2>
             <input type="text" id="regUser" placeholder="Usuario" class="input-field">
             <input type="password" id="regPass" placeholder="Contrase√±a" class="input-field">
             <input type="email" id="regEmail" placeholder="Email" class="input-field">
             <div class="phone-group">
                 <select id="regPrefix" class="input-field prefix"><option value="+34">üá™üá∏ +34</option><option value="+1">üá∫üá∏ +1</option></select>
                 <input type="tel" id="regPhone" placeholder="Tel√©fono" class="input-field phone">
             </div>
             <button class="btn-action" onclick="doRegister()">CREAR CUENTA</button>
             <div class="auth-footer"><a onclick="switchModal('registerModal', 'loginModal')">Ya tengo cuenta</a></div>
        </div>
    </div>
    <div id="depositModal" class="modal hidden">
        <div class="modal-content">
             <span class="close" onclick="closeModal('depositModal')">&times;</span>
             <h2>Dep√≥sito</h2>
             <input type="text" id="txidInput" placeholder="TXID Transacci√≥n" class="input-field">
             <button class="btn-action" onclick="confirmPayment()">CONFIRMAR</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>